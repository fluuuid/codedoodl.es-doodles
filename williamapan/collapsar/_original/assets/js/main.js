!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports=a("./vendor/dat.gui"),b.exports.color=a("./vendor/dat.color")},{"./vendor/dat.color":2,"./vendor/dat.gui":3}],2:[function(a,b){var d=b.exports=d||{};d.color=d.color||{},d.utils=d.utils||{},d.utils.common=function(){var a=Array.prototype.forEach,b=Array.prototype.slice;return{BREAK:{},extend:function(a){return this.each(b.call(arguments,1),function(b){for(var c in b)this.isUndefined(b[c])||(a[c]=b[c])},this),a},defaults:function(a){return this.each(b.call(arguments,1),function(b){for(var c in b)this.isUndefined(a[c])&&(a[c]=b[c])},this),a},compose:function(){var a=b.call(arguments);return function(){for(var c=b.call(arguments),d=a.length-1;d>=0;d--)c=[a[d].apply(this,c)];return c[0]}},each:function(b,c,d){if(a&&b.forEach===a)b.forEach(c,d);else if(b.length===b.length+0){for(var e=0,f=b.length;f>e;e++)if(e in b&&c.call(d,b[e],e)===this.BREAK)return}else for(var e in b)if(c.call(d,b[e],e)===this.BREAK)return},defer:function(a){setTimeout(a,0)},toArray:function(a){return a.toArray?a.toArray():b.call(a)},isUndefined:function(a){return void 0===a},isNull:function(a){return null===a},isNaN:function(a){return a!==a},isArray:Array.isArray||function(a){return a.constructor===Array},isObject:function(a){return a===Object(a)},isNumber:function(a){return a===a+0},isString:function(a){return a===a+""},isBoolean:function(a){return a===!1||a===!0},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)}}}(),d.color.toString=function(a){return function(b){if(1==b.a||a.isUndefined(b.a)){for(var c=b.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"rgba("+Math.round(b.r)+","+Math.round(b.g)+","+Math.round(b.b)+","+b.a+")"}}(d.utils.common),d.Color=d.color.Color=function(a,b,c,d){function f(a,b,c){Object.defineProperty(a,b,{get:function(){return"RGB"===this.__state.space?this.__state[b]:(h(this,b,c),this.__state[b])},set:function(a){"RGB"!==this.__state.space&&(h(this,b,c),this.__state.space="RGB"),this.__state[b]=a}})}function g(a,b){Object.defineProperty(a,b,{get:function(){return"HSV"===this.__state.space?this.__state[b]:(i(this),this.__state[b])},set:function(a){"HSV"!==this.__state.space&&(i(this),this.__state.space="HSV"),this.__state[b]=a}})}function h(a,c,e){if("HEX"===a.__state.space)a.__state[c]=b.component_from_hex(a.__state.hex,e);else{if("HSV"!==a.__state.space)throw"Corrupted color state";d.extend(a.__state,b.hsv_to_rgb(a.__state.h,a.__state.s,a.__state.v))}}function i(a){var c=b.rgb_to_hsv(a.r,a.g,a.b);d.extend(a.__state,{s:c.s,v:c.v}),d.isNaN(c.h)?d.isUndefined(a.__state.h)&&(a.__state.h=0):a.__state.h=c.h}var e=function(){if(this.__state=a.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return e.COMPONENTS=["r","g","b","h","s","v","hex","a"],d.extend(e.prototype,{toString:function(){return c(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),f(e.prototype,"r",2),f(e.prototype,"g",1),f(e.prototype,"b",0),g(e.prototype,"h"),g(e.prototype,"s"),g(e.prototype,"v"),Object.defineProperty(e.prototype,"a",{get:function(){return this.__state.a},set:function(a){this.__state.a=a}}),Object.defineProperty(e.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=b.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(a){this.__state.space="HEX",this.__state.hex=a}}),e}(d.color.interpret=function(a,b){var c,d,e=function(){d=!1;var a=arguments.length>1?b.toArray(arguments):arguments[0];return b.each(f,function(e){return e.litmus(a)?(b.each(e.conversions,function(e,f){return c=e.read(a),d===!1&&c!==!1?(d=c,c.conversionName=f,c.conversion=e,b.BREAK):void 0}),b.BREAK):void 0}),d},f=[{litmus:b.isString,conversions:{THREE_CHAR_HEX:{read:function(a){var b=a.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null===b?!1:{space:"HEX",hex:parseInt("0x"+b[1].toString()+b[1].toString()+b[2].toString()+b[2].toString()+b[3].toString()+b[3].toString())}},write:a},SIX_CHAR_HEX:{read:function(a){var b=a.match(/^#([A-F0-9]{6})$/i);return null===b?!1:{space:"HEX",hex:parseInt("0x"+b[1].toString())}},write:a},CSS_RGB:{read:function(a){var b=a.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null===b?!1:{space:"RGB",r:parseFloat(b[1]),g:parseFloat(b[2]),b:parseFloat(b[3])}},write:a},CSS_RGBA:{read:function(a){var b=a.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null===b?!1:{space:"RGB",r:parseFloat(b[1]),g:parseFloat(b[2]),b:parseFloat(b[3]),a:parseFloat(b[4])}},write:a}}},{litmus:b.isNumber,conversions:{HEX:{read:function(a){return{space:"HEX",hex:a,conversionName:"HEX"}},write:function(a){return a.hex}}}},{litmus:b.isArray,conversions:{RGB_ARRAY:{read:function(a){return 3!=a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2]}},write:function(a){return[a.r,a.g,a.b]}},RGBA_ARRAY:{read:function(a){return 4!=a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2],a:a[3]}},write:function(a){return[a.r,a.g,a.b,a.a]}}}},{litmus:b.isObject,conversions:{RGBA_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)&&b.isNumber(a.a)?{space:"RGB",r:a.r,g:a.g,b:a.b,a:a.a}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b,a:a.a}}},RGB_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)?{space:"RGB",r:a.r,g:a.g,b:a.b}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b}}},HSVA_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)&&b.isNumber(a.a)?{space:"HSV",h:a.h,s:a.s,v:a.v,a:a.a}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v,a:a.a}}},HSV_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)?{space:"HSV",h:a.h,s:a.s,v:a.v}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v}}}}}];return e}(d.color.toString,d.utils.common),d.color.math=function(){var a;return{hsv_to_rgb:function(a,b,c){var d=Math.floor(a/60)%6,e=a/60-Math.floor(a/60),f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=[[c,h,f],[g,c,f],[f,c,h],[f,g,c],[h,f,c],[c,f,g]][d];return{r:255*i[0],g:255*i[1],b:255*i[2]}},rgb_to_hsv:function(a,b,c){var g,h,d=Math.min(a,b,c),e=Math.max(a,b,c),f=e-d;return 0==e?{h:0/0,s:0,v:0}:(h=f/e,g=a==e?(b-c)/f:b==e?2+(c-a)/f:4+(a-b)/f,g/=6,0>g&&(g+=1),{h:360*g,s:h,v:e/255})},rgb_to_hex:function(a,b,c){var d=this.hex_with_component(0,2,a);return d=this.hex_with_component(d,1,b),d=this.hex_with_component(d,0,c)},component_from_hex:function(a,b){return 255&a>>8*b},hex_with_component:function(b,c,d){return d<<(a=8*c)|b&~(255<<a)}}}(),d.color.toString,d.utils.common)},{}],3:[function(a,b){var d=b.exports=d||{};d.gui=d.gui||{},d.utils=d.utils||{},d.controllers=d.controllers||{},d.dom=d.dom||{},d.color=d.color||{},d.utils.css=function(){return{load:function(a,b){b=b||document;var c=b.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=a,b.getElementsByTagName("head")[0].appendChild(c)},inject:function(a,b){b=b||document;var c=document.createElement("style");c.type="text/css",c.innerHTML=a,b.getElementsByTagName("head")[0].appendChild(c)}}}(),d.utils.common=function(){var a=Array.prototype.forEach,b=Array.prototype.slice;return{BREAK:{},extend:function(a){return this.each(b.call(arguments,1),function(b){for(var c in b)this.isUndefined(b[c])||(a[c]=b[c])},this),a},defaults:function(a){return this.each(b.call(arguments,1),function(b){for(var c in b)this.isUndefined(a[c])&&(a[c]=b[c])},this),a},compose:function(){var a=b.call(arguments);return function(){for(var c=b.call(arguments),d=a.length-1;d>=0;d--)c=[a[d].apply(this,c)];return c[0]}},each:function(b,c,d){if(a&&b.forEach===a)b.forEach(c,d);else if(b.length===b.length+0){for(var e=0,f=b.length;f>e;e++)if(e in b&&c.call(d,b[e],e)===this.BREAK)return}else for(var e in b)if(c.call(d,b[e],e)===this.BREAK)return},defer:function(a){setTimeout(a,0)},toArray:function(a){return a.toArray?a.toArray():b.call(a)},isUndefined:function(a){return void 0===a},isNull:function(a){return null===a},isNaN:function(a){return a!==a},isArray:Array.isArray||function(a){return a.constructor===Array},isObject:function(a){return a===Object(a)},isNumber:function(a){return a===a+0},isString:function(a){return a===a+""},isBoolean:function(a){return a===!1||a===!0},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)}}}(),d.controllers.Controller=function(a){var b=function(a,b){this.initialValue=a[b],this.domElement=document.createElement("div"),this.object=a,this.property=b,this.__onChange=void 0,this.__onFinishChange=void 0};return a.extend(b.prototype,{onChange:function(a){return this.__onChange=a,this},onFinishChange:function(a){return this.__onFinishChange=a,this},setValue:function(a){return this.object[this.property]=a,this.__onChange&&this.__onChange.call(this,a),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),b}(d.utils.common),d.dom.dom=function(a){function e(b){if("0"===b||a.isUndefined(b))return 0;var c=b.match(d);return a.isNull(c)?0:parseFloat(c[1])}var b={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},c={};a.each(b,function(b,d){a.each(b,function(a){c[a]=d})});var d=/(\d+(\.\d+)?)px/,f={makeSelectable:function(a,b){void 0!==a&&void 0!==a.style&&(a.onselectstart=b?function(){return!1}:function(){},a.style.MozUserSelect=b?"auto":"none",a.style.KhtmlUserSelect=b?"auto":"none",a.unselectable=b?"on":"off")},makeFullscreen:function(b,c,d){a.isUndefined(c)&&(c=!0),a.isUndefined(d)&&(d=!0),b.style.position="absolute",c&&(b.style.left=0,b.style.right=0),d&&(b.style.top=0,b.style.bottom=0)},fakeEvent:function(b,d,e,f){e=e||{};var g=c[d];if(!g)throw new Error("Event type "+d+" not supported.");var h=document.createEvent(g);switch(g){case"MouseEvents":var i=e.x||e.clientX||0,j=e.y||e.clientY||0;h.initMouseEvent(d,e.bubbles||!1,e.cancelable||!0,window,e.clickCount||1,0,0,i,j,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var k=h.initKeyboardEvent||h.initKeyEvent;a.defaults(e,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),k(d,e.bubbles||!1,e.cancelable,window,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.keyCode,e.charCode);break;default:h.initEvent(d,e.bubbles||!1,e.cancelable||!0)}a.defaults(h,f),b.dispatchEvent(h)},bind:function(a,b,c,d){return d=d||!1,a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c),f},unbind:function(a,b,c,d){return d=d||!1,a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c),f},addClass:function(a,b){if(void 0===a.className)a.className=b;else if(a.className!==b){var c=a.className.split(/ +/);-1==c.indexOf(b)&&(c.push(b),a.className=c.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return f},removeClass:function(a,b){if(b)if(void 0===a.className);else if(a.className===b)a.removeAttribute("class");else{var c=a.className.split(/ +/),d=c.indexOf(b);-1!=d&&(c.splice(d,1),a.className=c.join(" "))}else a.className=void 0;return f},hasClass:function(a,b){return new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)").test(a.className)||!1},getWidth:function(a){var b=getComputedStyle(a);return e(b["border-left-width"])+e(b["border-right-width"])+e(b["padding-left"])+e(b["padding-right"])+e(b.width)},getHeight:function(a){var b=getComputedStyle(a);return e(b["border-top-width"])+e(b["border-bottom-width"])+e(b["padding-top"])+e(b["padding-bottom"])+e(b.height)},getOffset:function(a){var b={left:0,top:0};if(a.offsetParent)do b.left+=a.offsetLeft,b.top+=a.offsetTop;while(a=a.offsetParent);return b},isActive:function(a){return a===document.activeElement&&(a.type||a.href)}};return f}(d.utils.common),d.controllers.OptionController=function(a,b,c){var d=function(a,e,f){d.superclass.call(this,a,e);var g=this;if(this.__select=document.createElement("select"),c.isArray(f)){var h={};c.each(f,function(a){h[a]=a}),f=h}c.each(f,function(a,b){var c=document.createElement("option");c.innerHTML=b,c.setAttribute("value",a),g.__select.appendChild(c)}),this.updateDisplay(),b.bind(this.__select,"change",function(){var a=this.options[this.selectedIndex].value;g.setValue(a)}),this.domElement.appendChild(this.__select)};return d.superclass=a,c.extend(d.prototype,a.prototype,{setValue:function(a){var b=d.superclass.prototype.setValue.call(this,a);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),b},updateDisplay:function(){return this.__select.value=this.getValue(),d.superclass.prototype.updateDisplay.call(this)}}),d}(d.controllers.Controller,d.dom.dom,d.utils.common),d.controllers.NumberController=function(a,b){function d(a){return a=a.toString(),a.indexOf(".")>-1?a.length-a.indexOf(".")-1:0}var c=function(a,e,f){c.superclass.call(this,a,e),f=f||{},this.__min=f.min,this.__max=f.max,this.__step=f.step,this.__impliedStep=b.isUndefined(this.__step)?0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__step,this.__precision=d(this.__impliedStep)};return c.superclass=a,b.extend(c.prototype,a.prototype,{setValue:function(a){return void 0!==this.__min&&a<this.__min?a=this.__min:void 0!==this.__max&&a>this.__max&&(a=this.__max),void 0!==this.__step&&0!=a%this.__step&&(a=Math.round(a/this.__step)*this.__step),c.superclass.prototype.setValue.call(this,a)},min:function(a){return this.__min=a,this},max:function(a){return this.__max=a,this},step:function(a){return this.__step=a,this}}),c}(d.controllers.Controller,d.utils.common),d.controllers.NumberControllerBox=function(a,b,c){function e(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c}var d=function(a,e,f){function i(){var a=parseFloat(g.__input.value);c.isNaN(a)||g.setValue(a)}function j(){i(),g.__onFinishChange&&g.__onFinishChange.call(g,g.getValue())}function k(a){b.bind(window,"mousemove",l),b.bind(window,"mouseup",m),h=a.clientY}function l(a){var b=h-a.clientY;g.setValue(g.getValue()+b*g.__impliedStep),h=a.clientY}function m(){b.unbind(window,"mousemove",l),b.unbind(window,"mouseup",m)}this.__truncationSuspended=!1,d.superclass.call(this,a,e,f);var h,g=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),b.bind(this.__input,"change",i),b.bind(this.__input,"blur",j),b.bind(this.__input,"mousedown",k),b.bind(this.__input,"keydown",function(a){13===a.keyCode&&(g.__truncationSuspended=!0,this.blur(),g.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return d.superclass=a,c.extend(d.prototype,a.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():e(this.getValue(),this.__precision),d.superclass.prototype.updateDisplay.call(this)}}),d}(d.controllers.NumberController,d.dom.dom,d.utils.common),d.controllers.NumberControllerSlider=function(a,b,c,d,e){function g(a,b,c,d,e){return d+(e-d)*((a-b)/(c-b))}var f=function(a,c,d,e,h){function j(a){b.bind(window,"mousemove",k),b.bind(window,"mouseup",l),k(a)}function k(a){a.preventDefault();var c=b.getOffset(i.__background),d=b.getWidth(i.__background);return i.setValue(g(a.clientX,c.left,c.left+d,i.__min,i.__max)),!1}function l(){b.unbind(window,"mousemove",k),b.unbind(window,"mouseup",l),i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}f.superclass.call(this,a,c,{min:d,max:e,step:h});var i=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),b.bind(this.__background,"mousedown",j),b.addClass(this.__background,"slider"),b.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return f.superclass=a,f.useDefaultStyles=function(){c.inject(e)},d.extend(f.prototype,a.prototype,{updateDisplay:function(){var a=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*a+"%",f.superclass.prototype.updateDisplay.call(this)}}),f}(d.controllers.NumberController,d.dom.dom,d.utils.css,d.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),d.controllers.FunctionController=function(a,b,c){var d=function(a,c,e){d.superclass.call(this,a,c);var f=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===e?"Fire":e,b.bind(this.__button,"click",function(a){return a.preventDefault(),f.fire(),!1}),b.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return d.superclass=a,c.extend(d.prototype,a.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),d}(d.controllers.Controller,d.dom.dom,d.utils.common),d.controllers.BooleanController=function(a,b,c){var d=function(a,c){function f(){e.setValue(!e.__prev)}d.superclass.call(this,a,c);var e=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),b.bind(this.__checkbox,"change",f,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return d.superclass=a,c.extend(d.prototype,a.prototype,{setValue:function(a){var b=d.superclass.prototype.setValue.call(this,a);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),b},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,d.superclass.prototype.updateDisplay.call(this)}}),d}(d.controllers.Controller,d.dom.dom,d.utils.common),d.color.toString=function(a){return function(b){if(1==b.a||a.isUndefined(b.a)){for(var c=b.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"rgba("+Math.round(b.r)+","+Math.round(b.g)+","+Math.round(b.b)+","+b.a+")"}}(d.utils.common),d.color.interpret=function(a,b){var c,d,e=function(){d=!1;var a=arguments.length>1?b.toArray(arguments):arguments[0];return b.each(f,function(e){return e.litmus(a)?(b.each(e.conversions,function(e,f){return c=e.read(a),d===!1&&c!==!1?(d=c,c.conversionName=f,c.conversion=e,b.BREAK):void 0}),b.BREAK):void 0}),d},f=[{litmus:b.isString,conversions:{THREE_CHAR_HEX:{read:function(a){var b=a.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null===b?!1:{space:"HEX",hex:parseInt("0x"+b[1].toString()+b[1].toString()+b[2].toString()+b[2].toString()+b[3].toString()+b[3].toString())}},write:a},SIX_CHAR_HEX:{read:function(a){var b=a.match(/^#([A-F0-9]{6})$/i);return null===b?!1:{space:"HEX",hex:parseInt("0x"+b[1].toString())}},write:a},CSS_RGB:{read:function(a){var b=a.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null===b?!1:{space:"RGB",r:parseFloat(b[1]),g:parseFloat(b[2]),b:parseFloat(b[3])}},write:a},CSS_RGBA:{read:function(a){var b=a.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null===b?!1:{space:"RGB",r:parseFloat(b[1]),g:parseFloat(b[2]),b:parseFloat(b[3]),a:parseFloat(b[4])}},write:a}}},{litmus:b.isNumber,conversions:{HEX:{read:function(a){return{space:"HEX",hex:a,conversionName:"HEX"}},write:function(a){return a.hex}}}},{litmus:b.isArray,conversions:{RGB_ARRAY:{read:function(a){return 3!=a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2]}},write:function(a){return[a.r,a.g,a.b]}},RGBA_ARRAY:{read:function(a){return 4!=a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2],a:a[3]}},write:function(a){return[a.r,a.g,a.b,a.a]}}}},{litmus:b.isObject,conversions:{RGBA_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)&&b.isNumber(a.a)?{space:"RGB",r:a.r,g:a.g,b:a.b,a:a.a}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b,a:a.a}}},RGB_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)?{space:"RGB",r:a.r,g:a.g,b:a.b}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b}}},HSVA_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)&&b.isNumber(a.a)?{space:"HSV",h:a.h,s:a.s,v:a.v,a:a.a}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v,a:a.a}}},HSV_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)?{space:"HSV",h:a.h,s:a.s,v:a.v}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v}}}}}];return e}(d.color.toString,d.utils.common),d.GUI=d.gui.GUI=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function A(a,b,c,f){if(void 0===b[c])throw new Error("Object "+b+' has no property "'+c+'"');var g;if(f.color)g=new k(b,c);else{var h=[b,c].concat(f.factoryArgs);g=d.apply(a,h)}f.before instanceof e&&(f.before=f.before.__li),D(a,g),n.addClass(g.domElement,"c");var i=document.createElement("span");n.addClass(i,"property-name"),i.innerHTML=g.property;var j=document.createElement("div");j.appendChild(i),j.appendChild(g.domElement);var l=B(a,j,f.before);return n.addClass(l,z.CLASS_CONTROLLER_ROW),n.addClass(l,typeof g.getValue()),C(a,l,g),a.__controllers.push(g),g}function B(a,b,c){var d=document.createElement("li");return b&&d.appendChild(b),c?a.__ul.insertBefore(d,params.before):a.__ul.appendChild(d),a.onResize(),d}function C(a,b,c){if(c.__li=b,c.__gui=a,o.extend(c,{options:function(b){return arguments.length>1?(c.remove(),A(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[o.toArray(arguments)]})):o.isArray(b)||o.isObject(b)?(c.remove(),A(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[b]})):void 0},name:function(a){return c.__li.firstElementChild.firstElementChild.innerHTML=a,c},listen:function(){return c.__gui.listen(c),c},remove:function(){return c.__gui.remove(c),c}}),c instanceof i){var d=new h(c.object,c.property,{min:c.__min,max:c.__max,step:c.__step});o.each(["updateDisplay","onChange","onFinishChange"],function(a){var b=c[a],e=d[a];c[a]=d[a]=function(){var a=Array.prototype.slice.call(arguments);return b.apply(c,a),e.apply(d,a)}}),n.addClass(b,"has-slider"),c.domElement.insertBefore(d.domElement,c.domElement.firstElementChild)}else if(c instanceof h){var e=function(b){return o.isNumber(c.__min)&&o.isNumber(c.__max)?(c.remove(),A(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[c.__min,c.__max,c.__step]})):b};c.min=o.compose(e,c.min),c.max=o.compose(e,c.max)}else c instanceof f?(n.bind(b,"click",function(){n.fakeEvent(c.__checkbox,"click")}),n.bind(c.__checkbox,"click",function(a){a.stopPropagation()})):c instanceof g?(n.bind(b,"click",function(){n.fakeEvent(c.__button,"click")}),n.bind(b,"mouseover",function(){n.addClass(c.__button,"hover")}),n.bind(b,"mouseout",function(){n.removeClass(c.__button,"hover")})):c instanceof k&&(n.addClass(b,"color"),c.updateDisplay=o.compose(function(a){return b.style.borderLeftColor=c.__color.toString(),a},c.updateDisplay),c.updateDisplay());c.setValue=o.compose(function(b){return a.getRoot().__preset_select&&c.isModified()&&L(a.getRoot(),!0),b},c.setValue)}function D(a,b){var c=a.getRoot(),d=c.__rememberedObjects.indexOf(b.object);if(-1!=d){var e=c.__rememberedObjectIndecesToControllers[d];if(void 0===e&&(e={},c.__rememberedObjectIndecesToControllers[d]=e),e[b.property]=b,c.load&&c.load.remembered){var g,f=c.load.remembered;if(f[a.preset])g=f[a.preset];else{if(!f[s])return;g=f[s]}if(g[d]&&void 0!==g[d][b.property]){var h=g[d][b.property];b.initialValue=h,b.setValue(h)}}}}function E(a,b){return document.location.href+"."+b}function F(a){function k(){i.style.display=a.useLocalStorage?"block":"none"}var b=a.__save_row=document.createElement("li");n.addClass(a.domElement,"has-save"),a.__ul.insertBefore(b,a.__ul.firstChild),n.addClass(b,"save-row");var c=document.createElement("span");c.innerHTML="&nbsp;",n.addClass(c,"button gears");var d=document.createElement("span");d.innerHTML="Save",n.addClass(d,"button"),n.addClass(d,"save");var e=document.createElement("span");e.innerHTML="New",n.addClass(e,"button"),n.addClass(e,"save-as");var f=document.createElement("span");f.innerHTML="Revert",n.addClass(f,"button"),n.addClass(f,"revert");var g=a.__preset_select=document.createElement("select");if(a.load&&a.load.remembered?o.each(a.load.remembered,function(b,c){J(a,c,c==a.preset)}):J(a,s,!1),n.bind(g,"change",function(){for(var b=0;b<a.__preset_select.length;b++)a.__preset_select[b].innerHTML=a.__preset_select[b].value;a.preset=this.value}),b.appendChild(g),b.appendChild(c),b.appendChild(d),b.appendChild(e),b.appendChild(f),t){var h=document.getElementById("dg-save-locally"),i=document.getElementById("dg-local-explain");h.style.display="block";var j=document.getElementById("dg-local-storage");"true"===localStorage.getItem(E(a,"isLocal"))&&j.setAttribute("checked","checked"),k(),n.bind(j,"change",function(){a.useLocalStorage=!a.useLocalStorage,k()})}var l=document.getElementById("dg-new-constructor");n.bind(l,"keydown",function(a){!a.metaKey||67!==a.which&&67!=a.keyCode||u.hide()}),n.bind(c,"click",function(){l.innerHTML=JSON.stringify(a.getSaveObject(),void 0,2),u.show(),l.focus(),l.select()}),n.bind(d,"click",function(){a.save()}),n.bind(e,"click",function(){var b=prompt("Enter a new preset name.");b&&a.saveAs(b)}),n.bind(f,"click",function(){a.revert()})}function G(a){function c(c){return c.preventDefault(),b=c.clientX,n.addClass(a.__closeButton,z.CLASS_DRAG),n.bind(window,"mousemove",d),n.bind(window,"mouseup",e),!1}function d(c){return c.preventDefault(),a.width+=b-c.clientX,a.onResize(),b=c.clientX,!1}function e(){n.removeClass(a.__closeButton,z.CLASS_DRAG),n.unbind(window,"mousemove",d),n.unbind(window,"mouseup",e)}a.__resize_handle=document.createElement("div"),o.extend(a.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var b;n.bind(a.__resize_handle,"mousedown",c),n.bind(a.__closeButton,"mousedown",c),a.domElement.insertBefore(a.__resize_handle,a.domElement.firstElementChild)}function H(a,b){a.domElement.style.width=b+"px",a.__save_row&&a.autoPlace&&(a.__save_row.style.width=b+"px"),a.__closeButton&&(a.__closeButton.style.width=b+"px")}function I(a,b){var c={};return o.each(a.__rememberedObjects,function(d,e){var f={},g=a.__rememberedObjectIndecesToControllers[e];o.each(g,function(a,c){f[c]=b?a.initialValue:a.getValue()}),c[e]=f}),c}function J(a,b,c){var d=document.createElement("option");d.innerHTML=b,d.value=b,a.__preset_select.appendChild(d),c&&(a.__preset_select.selectedIndex=a.__preset_select.length-1)}function K(a){for(var b=0;b<a.__preset_select.length;b++)a.__preset_select[b].value==a.preset&&(a.__preset_select.selectedIndex=b)}function L(a,b){var c=a.__preset_select[a.__preset_select.selectedIndex];c.innerHTML=b?c.value+"*":c.value}function M(a){0!=a.length&&l(function(){M(a)}),o.each(a,function(a){a.updateDisplay()})}a.inject(c);var u,w,p="dg",q=72,r=20,s="Default",t=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}(),v=!0,x=!1,y=[],z=function(a){function h(){localStorage.setItem(E(b,"gui"),JSON.stringify(b.getSaveObject()))}function j(){var a=b.getRoot();a.width+=1,o.defer(function(){a.width-=1})}var b=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),n.addClass(this.domElement,p),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],a=a||{},a=o.defaults(a,{autoPlace:!0,width:z.DEFAULT_WIDTH}),a=o.defaults(a,{resizable:a.autoPlace,hideable:a.autoPlace}),o.isUndefined(a.load)?a.load={preset:s}:a.preset&&(a.load.preset=a.preset),o.isUndefined(a.parent)&&a.hideable&&y.push(this),a.resizable=o.isUndefined(a.parent)&&a.resizable,a.autoPlace&&o.isUndefined(a.scrollable)&&(a.scrollable=!0);var c=t&&"true"===localStorage.getItem(E(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return a.parent}},scrollable:{get:function(){return a.scrollable}},autoPlace:{get:function(){return a.autoPlace}},preset:{get:function(){return b.parent?b.getRoot().preset:a.load.preset},set:function(c){b.parent?b.getRoot().preset=c:a.load.preset=c,K(this),b.revert()}},width:{get:function(){return a.width},set:function(c){a.width=c,H(b,c)}},name:{get:function(){return a.name},set:function(b){a.name=b,e&&(e.innerHTML=a.name)}},closed:{get:function(){return a.closed},set:function(c){a.closed=c,a.closed?n.addClass(b.__ul,z.CLASS_CLOSED):n.removeClass(b.__ul,z.CLASS_CLOSED),this.onResize(),b.__closeButton&&(b.__closeButton.innerHTML=c?z.TEXT_OPEN:z.TEXT_CLOSED)}},load:{get:function(){return a.load}},useLocalStorage:{get:function(){return c},set:function(a){t&&(c=a,a?n.bind(window,"unload",h):n.unbind(window,"unload",h),localStorage.setItem(E(b,"isLocal"),a))}}}),o.isUndefined(a.parent)){if(a.closed=!1,n.addClass(this.domElement,z.CLASS_MAIN),n.makeSelectable(this.domElement,!1),t&&c){b.useLocalStorage=!0;var d=localStorage.getItem(E(this,"gui"));d&&(a.load=JSON.parse(d))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=z.TEXT_CLOSED,n.addClass(this.__closeButton,z.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),n.bind(this.__closeButton,"click",function(){b.closed=!b.closed})}else{void 0===a.closed&&(a.closed=!0);var e=document.createTextNode(a.name);n.addClass(e,"controller-name");var f=B(b,e),g=function(a){return a.preventDefault(),b.closed=!b.closed,!1};n.addClass(this.__ul,z.CLASS_CLOSED),n.addClass(f,"title"),n.bind(f,"click",g),a.closed||(this.closed=!1)}a.autoPlace&&(o.isUndefined(a.parent)&&(v&&(w=document.createElement("div"),n.addClass(w,p),n.addClass(w,z.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(w),v=!1),w.appendChild(this.domElement),n.addClass(this.domElement,z.CLASS_AUTO_PLACE)),this.parent||H(b,a.width)),n.bind(window,"resize",function(){b.onResize()}),n.bind(this.__ul,"webkitTransitionEnd",function(){b.onResize()}),n.bind(this.__ul,"transitionend",function(){b.onResize()}),n.bind(this.__ul,"oTransitionEnd",function(){b.onResize()}),this.onResize(),a.resizable&&G(this),b.getRoot(),a.parent||j()};return z.toggleHide=function(){x=!x,o.each(y,function(a){a.domElement.style.zIndex=x?-999:999,a.domElement.style.opacity=x?0:1})},z.CLASS_AUTO_PLACE="a",z.CLASS_AUTO_PLACE_CONTAINER="ac",z.CLASS_MAIN="main",z.CLASS_CONTROLLER_ROW="cr",z.CLASS_TOO_TALL="taller-than-window",z.CLASS_CLOSED="closed",z.CLASS_CLOSE_BUTTON="close-button",z.CLASS_DRAG="drag",z.DEFAULT_WIDTH=245,z.TEXT_CLOSED="Close Controls",z.TEXT_OPEN="Open Controls",n.bind(window,"keydown",function(a){"text"===document.activeElement.type||a.which!==q&&a.keyCode!=q||z.toggleHide()},!1),o.extend(z.prototype,{add:function(a,b){return A(this,a,b,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(a,b){return A(this,a,b,{color:!0})},remove:function(a){this.__ul.removeChild(a.__li),this.__controllers.slice(this.__controllers.indexOf(a),1);var b=this;o.defer(function(){b.onResize()})},destroy:function(){this.autoPlace&&w.removeChild(this.domElement)},addFolder:function(a){if(void 0!==this.__folders[a])throw new Error('You already have a folder in this GUI by the name "'+a+'"');var b={name:a,parent:this};b.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[a]&&(b.closed=this.load.folders[a].closed,b.load=this.load.folders[a]);
var c=new z(b);this.__folders[a]=c;var d=B(this,c.domElement);return n.addClass(d,"folder"),c},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var a=this.getRoot();if(a.scrollable){var b=n.getOffset(a.__ul).top,c=0;o.each(a.__ul.childNodes,function(b){a.autoPlace&&b===a.__save_row||(c+=n.getHeight(b))}),window.innerHeight-b-r<c?(n.addClass(a.domElement,z.CLASS_TOO_TALL),a.__ul.style.height=window.innerHeight-b-r+"px"):(n.removeClass(a.domElement,z.CLASS_TOO_TALL),a.__ul.style.height="auto")}a.__resize_handle&&o.defer(function(){a.__resize_handle.style.height=a.__ul.offsetHeight+"px"}),a.__closeButton&&(a.__closeButton.style.width=a.width+"px")},remember:function(){if(o.isUndefined(u)&&(u=new m,u.domElement.innerHTML=b),this.parent)throw new Error("You can only call remember on a top level GUI.");var a=this;o.each(Array.prototype.slice.call(arguments),function(b){0==a.__rememberedObjects.length&&F(a),-1==a.__rememberedObjects.indexOf(b)&&a.__rememberedObjects.push(b)}),this.autoPlace&&H(this,this.width)},getRoot:function(){for(var a=this;a.parent;)a=a.parent;return a},getSaveObject:function(){var a=this.load;return a.closed=this.closed,this.__rememberedObjects.length>0&&(a.preset=this.preset,a.remembered||(a.remembered={}),a.remembered[this.preset]=I(this)),a.folders={},o.each(this.__folders,function(b,c){a.folders[c]=b.getSaveObject()}),a},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=I(this),L(this,!1)},saveAs:function(a){this.load.remembered||(this.load.remembered={},this.load.remembered[s]=I(this,!0)),this.load.remembered[a]=I(this),this.preset=a,J(this,a,!0)},revert:function(a){o.each(this.__controllers,function(b){this.getRoot().load.remembered?D(a||this.getRoot(),b):b.setValue(b.initialValue)},this),o.each(this.__folders,function(a){a.revert(a)}),a||L(this.getRoot(),!1)},listen:function(a){var b=0==this.__listening.length;this.__listening.push(a),b&&M(this.__listening)}}),z}(d.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",d.controllers.factory=function(a,b,c,d,e,f,g){return function(h,i){var j=h[i];return g.isArray(arguments[2])||g.isObject(arguments[2])?new a(h,i,arguments[2]):g.isNumber(j)?g.isNumber(arguments[2])&&g.isNumber(arguments[3])?new c(h,i,arguments[2],arguments[3]):new b(h,i,{min:arguments[2],max:arguments[3]}):g.isString(j)?new d(h,i):g.isFunction(j)?new e(h,i,""):g.isBoolean(j)?new f(h,i):void 0}}(d.controllers.OptionController,d.controllers.NumberControllerBox,d.controllers.NumberControllerSlider,d.controllers.StringController=function(a,b,c){var d=function(a,c){function f(){e.setValue(e.__input.value)}function g(){e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}d.superclass.call(this,a,c);var e=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),b.bind(this.__input,"keyup",f),b.bind(this.__input,"change",f),b.bind(this.__input,"blur",g),b.bind(this.__input,"keydown",function(a){13===a.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return d.superclass=a,c.extend(d.prototype,a.prototype,{updateDisplay:function(){return b.isActive(this.__input)||(this.__input.value=this.getValue()),d.superclass.prototype.updateDisplay.call(this)}}),d}(d.controllers.Controller,d.dom.dom,d.utils.common),d.controllers.FunctionController,d.controllers.BooleanController,d.utils.common),d.controllers.Controller,d.controllers.BooleanController,d.controllers.FunctionController,d.controllers.NumberControllerBox,d.controllers.NumberControllerSlider,d.controllers.OptionController,d.controllers.ColorController=function(a,b,c,d,e){function h(a,b,c,d){a.style.background="",e.each(g,function(e){a.style.cssText+="background: "+e+"linear-gradient("+b+", "+c+" 0%, "+d+" 100%); "})}function i(a){a.style.background="",a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var f=function(a,g){function l(a){p(a),b.bind(window,"mousemove",p),b.bind(window,"mouseup",m)}function m(){b.unbind(window,"mousemove",p),b.unbind(window,"mouseup",m)}function n(){var a=d(this.value);a!==!1?(j.__color.__state=a,j.setValue(j.__color.toOriginal())):this.value=j.__color.toString()}function o(){b.unbind(window,"mousemove",q),b.unbind(window,"mouseup",o)}function p(a){a.preventDefault();var c=b.getWidth(j.__saturation_field),d=b.getOffset(j.__saturation_field),e=(a.clientX-d.left+document.body.scrollLeft)/c,f=1-(a.clientY-d.top+document.body.scrollTop)/c;return f>1?f=1:0>f&&(f=0),e>1?e=1:0>e&&(e=0),j.__color.v=f,j.__color.s=e,j.setValue(j.__color.toOriginal()),!1}function q(a){a.preventDefault();var c=b.getHeight(j.__hue_field),d=b.getOffset(j.__hue_field),e=1-(a.clientY-d.top+document.body.scrollTop)/c;return e>1?e=1:0>e&&(e=0),j.__color.h=360*e,j.setValue(j.__color.toOriginal()),!1}f.superclass.call(this,a,g),this.__color=new c(this.getValue()),this.__temp=new c(0);var j=this;this.domElement=document.createElement("div"),b.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",b.bind(this.__input,"keydown",function(a){13===a.keyCode&&n.call(this)}),b.bind(this.__input,"blur",n),b.bind(this.__selector,"mousedown",function(){b.addClass(this,"drag").bind(window,"mouseup",function(){b.removeClass(j.__selector,"drag")})});var k=document.createElement("div");e.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),e.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),e.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),e.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),e.extend(k.style,{width:"100%",height:"100%",background:"none"}),h(k,"top","rgba(0,0,0,0)","#000"),e.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),i(this.__hue_field),e.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),b.bind(this.__saturation_field,"mousedown",l),b.bind(this.__field_knob,"mousedown",l),b.bind(this.__hue_field,"mousedown",function(a){q(a),b.bind(window,"mousemove",q),b.bind(window,"mouseup",o)}),this.__saturation_field.appendChild(k),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};f.superclass=a,e.extend(f.prototype,a.prototype,{updateDisplay:function(){var a=d(this.getValue());if(a!==!1){var b=!1;e.each(c.COMPONENTS,function(c){return e.isUndefined(a[c])||e.isUndefined(this.__color.__state[c])||a[c]===this.__color.__state[c]?void 0:(b=!0,{})},this),b&&e.extend(this.__color.__state,a)}e.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var f=this.__color.v<.5||this.__color.s>.5?255:0,g=255-f;e.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+f+","+f+","+f+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,h(this.__saturation_field,"left","#fff",this.__temp.toString()),e.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+f+","+f+","+f+")",textShadow:this.__input_textShadow+"rgba("+g+","+g+","+g+",.7)"})}});var g=["-moz-","-o-","-webkit-","-ms-",""];return f}(d.controllers.Controller,d.dom.dom,d.color.Color=function(a,b,c,d){function f(a,b,c){Object.defineProperty(a,b,{get:function(){return"RGB"===this.__state.space?this.__state[b]:(h(this,b,c),this.__state[b])},set:function(a){"RGB"!==this.__state.space&&(h(this,b,c),this.__state.space="RGB"),this.__state[b]=a}})}function g(a,b){Object.defineProperty(a,b,{get:function(){return"HSV"===this.__state.space?this.__state[b]:(i(this),this.__state[b])},set:function(a){"HSV"!==this.__state.space&&(i(this),this.__state.space="HSV"),this.__state[b]=a}})}function h(a,c,e){if("HEX"===a.__state.space)a.__state[c]=b.component_from_hex(a.__state.hex,e);else{if("HSV"!==a.__state.space)throw"Corrupted color state";d.extend(a.__state,b.hsv_to_rgb(a.__state.h,a.__state.s,a.__state.v))}}function i(a){var c=b.rgb_to_hsv(a.r,a.g,a.b);d.extend(a.__state,{s:c.s,v:c.v}),d.isNaN(c.h)?d.isUndefined(a.__state.h)&&(a.__state.h=0):a.__state.h=c.h}var e=function(){if(this.__state=a.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return e.COMPONENTS=["r","g","b","h","s","v","hex","a"],d.extend(e.prototype,{toString:function(){return c(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),f(e.prototype,"r",2),f(e.prototype,"g",1),f(e.prototype,"b",0),g(e.prototype,"h"),g(e.prototype,"s"),g(e.prototype,"v"),Object.defineProperty(e.prototype,"a",{get:function(){return this.__state.a},set:function(a){this.__state.a=a}}),Object.defineProperty(e.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=b.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(a){this.__state.space="HEX",this.__state.hex=a}}),e}(d.color.interpret,d.color.math=function(){var a;return{hsv_to_rgb:function(a,b,c){var d=Math.floor(a/60)%6,e=a/60-Math.floor(a/60),f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=[[c,h,f],[g,c,f],[f,c,h],[f,g,c],[h,f,c],[c,f,g]][d];return{r:255*i[0],g:255*i[1],b:255*i[2]}},rgb_to_hsv:function(a,b,c){var g,h,d=Math.min(a,b,c),e=Math.max(a,b,c),f=e-d;return 0==e?{h:0/0,s:0,v:0}:(h=f/e,g=a==e?(b-c)/f:b==e?2+(c-a)/f:4+(a-b)/f,g/=6,0>g&&(g+=1),{h:360*g,s:h,v:e/255})},rgb_to_hex:function(a,b,c){var d=this.hex_with_component(0,2,a);return d=this.hex_with_component(d,1,b),d=this.hex_with_component(d,0,c)},component_from_hex:function(a,b){return 255&a>>8*b},hex_with_component:function(b,c,d){return d<<(a=8*c)|b&~(255<<a)}}}(),d.color.toString,d.utils.common),d.color.interpret,d.utils.common),d.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),d.dom.CenteredDiv=function(a,b){var c=function(){this.backgroundElement=document.createElement("div"),b.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),a.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),b.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var c=this;a.bind(this.backgroundElement,"click",function(){c.hide()})};return c.prototype.show=function(){var a=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),b.defer(function(){a.backgroundElement.style.opacity=1,a.domElement.style.opacity=1,a.domElement.style.webkitTransform="scale(1)"})},c.prototype.hide=function(){var b=this,c=function(){b.domElement.style.display="none",b.backgroundElement.style.display="none",a.unbind(b.domElement,"webkitTransitionEnd",c),a.unbind(b.domElement,"transitionend",c),a.unbind(b.domElement,"oTransitionEnd",c)};a.bind(this.domElement,"webkitTransitionEnd",c),a.bind(this.domElement,"transitionend",c),a.bind(this.domElement,"oTransitionEnd",c),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},c.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-a.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-a.getHeight(this.domElement)/2+"px"},c}(d.dom.dom,d.utils.common),d.dom.dom,d.utils.common)},{}],4:[function(a,b){b.exports=function(a){function c(c,d){function G(){return 2*Math.PI/60/60*e.autoRotateSpeed}function H(){return Math.pow(.95,e.zoomSpeed)}function I(a){if(e.enabled!==!1){if(a.preventDefault(),a.button===e.mouseButtons.ORBIT){if(e.noRotate===!0)return;A=z.ROTATE,g.set(a.clientX,a.clientY)}else if(a.button===e.mouseButtons.ZOOM){if(e.noZoom===!0)return;A=z.DOLLY,o.set(a.clientX,a.clientY)}else if(a.button===e.mouseButtons.PAN){if(e.noPan===!0)return;A=z.PAN,j.set(a.clientX,a.clientY)}A!==z.NONE&&(document.addEventListener("mousemove",J,!1),document.addEventListener("mouseup",K,!1),e.dispatchEvent(E))}}function J(a){if(e.enabled!==!1){a.preventDefault();var b=e.domElement===document?e.domElement.body:e.domElement;if(A===z.ROTATE){if(e.noRotate===!0)return;h.set(a.clientX,a.clientY),i.subVectors(h,g),e.rotateLeft(2*Math.PI*i.x/b.clientWidth*e.rotateSpeed),e.rotateUp(2*Math.PI*i.y/b.clientHeight*e.rotateSpeed),g.copy(h)}else if(A===z.DOLLY){if(e.noZoom===!0)return;p.set(a.clientX,a.clientY),q.subVectors(p,o),q.y>0?e.dollyIn():e.dollyOut(),o.copy(p)}else if(A===z.PAN){if(e.noPan===!0)return;k.set(a.clientX,a.clientY),l.subVectors(k,j),e.pan(l.x,l.y),j.copy(k)}A!==z.NONE&&e.update()}}function K(){e.enabled!==!1&&(document.removeEventListener("mousemove",J,!1),document.removeEventListener("mouseup",K,!1),e.dispatchEvent(F),A=z.NONE)}function L(a){if(e.enabled!==!1&&e.noZoom!==!0&&A===z.NONE){a.preventDefault(),a.stopPropagation();var b=0;void 0!==a.wheelDelta?b=a.wheelDelta:void 0!==a.detail&&(b=-a.detail),b>0?e.dollyOut():e.dollyIn(),e.update(),e.dispatchEvent(E),e.dispatchEvent(F)}}function M(a){if(e.enabled!==!1&&e.noKeys!==!0&&e.noPan!==!0)switch(a.keyCode){case e.keys.UP:e.pan(0,e.keyPanSpeed),e.update();break;case e.keys.BOTTOM:e.pan(0,-e.keyPanSpeed),e.update();break;case e.keys.LEFT:e.pan(e.keyPanSpeed,0),e.update();break;case e.keys.RIGHT:e.pan(-e.keyPanSpeed,0),e.update()}}function N(a){if(e.enabled!==!1){switch(a.touches.length){case 1:if(e.noRotate===!0)return;A=z.TOUCH_ROTATE,g.set(a.touches[0].pageX,a.touches[0].pageY);break;case 2:if(e.noZoom===!0)return;A=z.TOUCH_DOLLY;var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY,d=Math.sqrt(b*b+c*c);o.set(0,d);break;case 3:if(e.noPan===!0)return;A=z.TOUCH_PAN,j.set(a.touches[0].pageX,a.touches[0].pageY);break;default:A=z.NONE}A!==z.NONE&&e.dispatchEvent(E)}}function O(a){if(e.enabled!==!1){a.preventDefault(),a.stopPropagation();var b=e.domElement===document?e.domElement.body:e.domElement;switch(a.touches.length){case 1:if(e.noRotate===!0)return;if(A!==z.TOUCH_ROTATE)return;h.set(a.touches[0].pageX,a.touches[0].pageY),i.subVectors(h,g),e.rotateLeft(2*Math.PI*i.x/b.clientWidth*e.rotateSpeed),e.rotateUp(2*Math.PI*i.y/b.clientHeight*e.rotateSpeed),g.copy(h),e.update();break;case 2:if(e.noZoom===!0)return;if(A!==z.TOUCH_DOLLY)return;var c=a.touches[0].pageX-a.touches[1].pageX,d=a.touches[0].pageY-a.touches[1].pageY,f=Math.sqrt(c*c+d*d);p.set(0,f),q.subVectors(p,o),q.y>0?e.dollyOut():e.dollyIn(),o.copy(p),e.update();break;case 3:if(e.noPan===!0)return;if(A!==z.TOUCH_PAN)return;k.set(a.touches[0].pageX,a.touches[0].pageY),l.subVectors(k,j),e.pan(l.x,l.y),j.copy(k),e.update();break;default:A=z.NONE}}}function P(){e.enabled!==!1&&(e.dispatchEvent(F),A=z.NONE)}this.object=c,this.domElement=void 0!==d?d:document,this.enabled=!0,this.target=new a.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:b.LEFT,ZOOM:b.MIDDLE,PAN:b.RIGHT};var r,s,e=this,f=1e-6,g=new a.Vector2,h=new a.Vector2,i=new a.Vector2,j=new a.Vector2,k=new a.Vector2,l=new a.Vector2,m=new a.Vector3,n=new a.Vector3,o=new a.Vector2,p=new a.Vector2,q=new a.Vector2,t=0,u=0,v=1,w=new a.Vector3,x=new a.Vector3,y=new a.Quaternion,z={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},A=z.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone();var B=(new a.Quaternion).setFromUnitVectors(c.up,new a.Vector3(0,1,0)),C=B.clone().inverse(),D={type:"change"},E={type:"start"},F={type:"end"};this.rotateLeft=function(a){void 0===a&&(a=G()),u-=a},this.rotateUp=function(a){void 0===a&&(a=G()),t-=a},this.panLeft=function(a){var b=this.object.matrix.elements;m.set(b[0],b[1],b[2]),m.multiplyScalar(-a),w.add(m)},this.panUp=function(a){var b=this.object.matrix.elements;m.set(b[4],b[5],b[6]),m.multiplyScalar(a),w.add(m)},this.pan=function(a,b){var c=e.domElement===document?e.domElement.body:e.domElement;if(void 0!==e.object.fov){var d=e.object.position,f=d.clone().sub(e.target),g=f.length();g*=Math.tan(e.object.fov/2*Math.PI/180),e.panLeft(2*a*g/c.clientHeight),e.panUp(2*b*g/c.clientHeight)}else void 0!==e.object.top?(e.panLeft(a*(e.object.right-e.object.left)/c.clientWidth),e.panUp(b*(e.object.top-e.object.bottom)/c.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(a){void 0===a&&(a=H()),v/=a},this.dollyOut=function(a){void 0===a&&(a=H()),v*=a},this.update=function(){var a=this.object.position;n.copy(a).sub(this.target),n.applyQuaternion(B),r=Math.atan2(n.x,n.z),s=Math.atan2(Math.sqrt(n.x*n.x+n.z*n.z),n.y),this.autoRotate&&A===z.NONE&&this.rotateLeft(G()),r+=u,s+=t,r=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,r)),s=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,s)),s=Math.max(f,Math.min(Math.PI-f,s));var b=n.length()*v;b=Math.max(this.minDistance,Math.min(this.maxDistance,b)),this.target.add(w),n.x=b*Math.sin(s)*Math.sin(r),n.y=b*Math.cos(s),n.z=b*Math.sin(s)*Math.cos(r),n.applyQuaternion(C),a.copy(this.target).add(n),this.object.lookAt(this.target),u=0,t=0,v=1,w.set(0,0,0),(x.distanceToSquared(this.object.position)>f||8*(1-y.dot(this.object.quaternion))>f)&&(this.dispatchEvent(D),x.copy(this.object.position),y.copy(this.object.quaternion))},this.reset=function(){A=z.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.update()},this.getPolarAngle=function(){return s},this.getAzimuthalAngle=function(){return r},this.domElement.addEventListener("contextmenu",function(a){a.preventDefault()},!1),this.domElement.addEventListener("mousedown",I,!1),this.domElement.addEventListener("mousewheel",L,!1),this.domElement.addEventListener("DOMMouseScroll",L,!1),this.domElement.addEventListener("touchstart",N,!1),this.domElement.addEventListener("touchend",P,!1),this.domElement.addEventListener("touchmove",O,!1),window.addEventListener("keydown",M,!1),this.update()}var b=a.MOUSE;return b||(b={LEFT:0,MIDDLE:1,RIGHT:2}),c.prototype=Object.create(a.EventDispatcher.prototype),c.prototype.constructor=c,c}},{}],5:[function(a,b){"use strict";function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("./experiment/experiment"),g=function(){function a(){e(this,a),this.el=document.querySelector(".app"),this.DELTA_TIME=0,this.LAST_TIME=Date.now(),this.experiment=new f(this.el),this.experiment.attachToContainer(),this.addListeners()}return d(a,[{key:"addListeners",value:function(){window.addEventListener("resize",this.onResize.bind(this)),TweenMax.ticker.addEventListener("tick",this.update.bind(this))}},{key:"update",value:function(){this.DELTA_TIME=Date.now()-this.LAST_TIME,this.LAST_TIME=Date.now(),this.experiment.update(this.DELTA_TIME),this.experiment.render()}},{key:"onResize",value:function(){var b=window.innerWidth,c=window.innerHeight;this.experiment.resize(b,c)}}]),a}();b.exports=g},{"./experiment/experiment":6}],6:[function(a,b){"use strict";function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function t(){document.body.requestFullscreen?document.body.requestFullscreen():document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.webkitRequestFullscreen?document.body.webkitRequestFullscreen():document.body.msRequestFullscreen&&document.body.msRequestFullscreen()}function u(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();a("three-orbit-controls")(THREE),a("../utils/number-utils"),a("dat-gui");var i=void 0,j=!1,k=.01,n=null,o=null,p=new THREE.Raycaster,q=new THREE.Vector2(2,2),r=null,s=!1,v=function(){function a(b){e(this,a),this.container=b,this.renderer=null,this.camera=null,this.scene=null,this.texture1=null,this.texture2=null,this.width=window.innerWidth,this.height=window.innerHeight,this.mousePos={x:window.innerWidth/2,y:window.innerHeight/2},this.color0=0,this.color1=0,this.color2=16777215,this.color3=16777215,this.offsetSpeed=.001,this.speedUniform=0,this.initScene(),this.initCylinder(),window.addEventListener("mousedown",this.onMouseDown.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this)),window.addEventListener("touchstart",this.onMouseDown.bind(this)),window.addEventListener("touchend",this.onMouseUp.bind(this)),window.addEventListener("touchmove",this.onMouseMove.bind(this)),window.addEventListener("resize",this.resize.bind(this));var c=document.querySelector(".fullscreen");c.addEventListener("click",function(){s=!s,s?t():u()})}return d(a,[{key:"onMouseDown",value:function(){j=!0}},{key:"onMouseUp",value:function(){j=!1,TweenMax.killTweensOf(this),n=new TweenMax(this,1,{offsetSpeed:.001,ease:Power4.easeOut}),o=new TweenMax(this.camera.position,1,{z:7,ease:Power4.easeOut}),r=new TweenMax(this,1,{speedUniform:0,ease:Power4.easeOut})}},{key:"onMouseMove",value:function(a){q.x=2*(a.clientX/window.innerWidth)-1,q.y=2*-(a.clientY/window.innerHeight)+1,p.setFromCamera(q,this.camera);for(var b=p.intersectObjects([this.mesh]),c=0;c<b.length;c++);var d;b.length>0&&(d=b[0].point,this.uniforms.mousePoint.value={x:d.x,y:-d.y,z:-d.z})}},{key:"initScene",value:function(){this.renderer=new THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(0),this.attachToContainer(),this.camera=new THREE.PerspectiveCamera(40,window.innerWidth/window.innerHeight,.1,1e4),this.scene=new THREE.Scene,this.camera.position.set(0,0,7),this.camera.lookAt(this.scene.position),this.d_light0=new THREE.DirectionalLight(this.color0,1),this.d_light0.position.set(1,1,1).normalize(),this.scene.add(this.d_light0),this.d_light1=new THREE.DirectionalLight(this.color1,1),this.d_light1.position.set(-1,1,1).normalize(),this.scene.add(this.d_light1),this.d_light2=new THREE.DirectionalLight(this.color2,1),this.d_light2.position.set(-1,-1,1).normalize(),this.scene.add(this.d_light2),this.d_light3=new THREE.DirectionalLight(this.color3,1),this.d_light3.position.set(1,-1,1).normalize(),this.scene.add(this.d_light3)}},{key:"attachToContainer",value:function(){this.container.appendChild(this.renderer.domElement)}},{key:"initCylinder",value:function(){var a=new THREE.CylinderGeometry(1.8,1.8,20,50,50,!0);i=THREE.ImageUtils.loadTexture("assets/images/texture.jpg"),i.wrapT=THREE.RepeatWrapping,this.uniforms={texture:{type:"t",value:i},offsetRepeat:{type:"v2",value:new THREE.Vector2(0,0)},color:{type:"v3",value:new THREE.Vector3(57/255,92/255,170/255)},alpha:{type:"f",value:1},scalar:{type:"f",value:.6},time:{type:"f",value:0},mousePoint:{type:"v3",value:new THREE.Vector3(2,2,2)},isIntersecting:{type:"i",value:0},speed:{type:"f",value:this.speedUniform}};
var b=document.querySelector("#vs").textContent,c=document.querySelector("#fs").textContent,d=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:b,fragmentShader:c,side:THREE.DoubleSide,transparent:!0});this.mesh=new THREE.Mesh(a,d),this.mesh.rotation.x=Math.PI/2,this.scene.add(this.mesh),this.mesh.flipSided=!0,this.uniforms2={texture:{type:"t",value:i},offsetRepeat:{type:"v2",value:new THREE.Vector2(0,0)},color:{type:"v3",value:new THREE.Vector3(128/255,128/255,128/255)},alpha:{type:"f",value:.15},scalar:{type:"f",value:.6},time:{type:"f",value:0},mousePoint:{type:"v3",value:new THREE.Vector3(2,2,2)},isIntersecting:{type:"i",value:0},speed:{type:"f",value:this.speedUniform}};var e=new THREE.ShaderMaterial({uniforms:this.uniforms2,vertexShader:b,fragmentShader:c,side:THREE.DoubleSide,transparent:!0,wireframe:!0});this.mesh2=new THREE.Mesh(a,e),this.mesh2.rotation.x=Math.PI/2,this.scene.add(this.mesh2)}},{key:"update",value:function(){j&&this.offsetSpeed<1.5*k&&(this.offsetSpeed+=3e-4,this.speedUniform-=.1),j&&this.camera.position.z>3&&(this.camera.position.z-=.008),this.renderer.render(this.scene,this.camera),this.uniforms.offsetRepeat.value.y+=this.offsetSpeed/2,this.uniforms2.offsetRepeat.value.y+=this.offsetSpeed/2,this.uniforms.time.value+=.01,this.uniforms2.time.value+=.01,this.uniforms.speed.value=this.speedUniform,this.uniforms2.speed.value=this.speedUniform,i.needsUpdate=!0;var b=Date.now()/1e3,d=Math.sin(.75*b*Math.PI)/4;d=b*Math.PI/4,this.camera.rotation.z=d,this.camera.lookAt(this.scene.position)}},{key:"render",value:function(){!this.renderer}},{key:"resize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)}}]),a}();b.exports=v},{"../utils/number-utils":7,"dat-gui":1,"three-orbit-controls":4}],7:[function(a,b){"use strict";var d={limit:function(a,b,c){return Math.min(Math.max(b,a),c)},map:function(a,b,c,d,e){var g=(a-b)/(c-b),h=g*(e-d)+d;return h},hex2rgb:function(a){return a="#"==a.substr(0,1)?a.substr(1):a,[parseInt(a.substr(0,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(4,2),16)]},toRadians:function(a){return a*(Math.PI/180)},toDegree:function(a){return a*(180/Math.PI)}};b.exports=d},{}],8:[function(a){"use strict";var d=a("./app");window.onload=function(){new d}},{"./app":5}]},{},[8]);